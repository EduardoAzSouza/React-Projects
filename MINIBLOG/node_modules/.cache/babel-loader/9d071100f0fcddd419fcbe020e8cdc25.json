{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile, signOut } from \"firebase/auth\";\nimport { useState, useEffect } from \"react\";\nexport const useAuthentication = () => {\n  _s();\n\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(null); // deal with memory leak\n\n  const [cancelled, setCancelled] = useState(false);\n  const auth = getAuth();\n\n  function checkIfIsCancelled() {\n    if (cancelled) {\n      return;\n    }\n  }\n\n  const createUser = async data => {\n    checkIfIsCancelled();\n    setLoading(true);\n\n    try {\n      const {\n        user\n      } = await createUserWithEmailAndPassword(auth, data.email, data.password);\n      await updateProfile(user, {\n        displayName: data.displayName\n      });\n      return user;\n    } catch (error) {\n      console.log(error.message);\n      console.log(typeof error.message);\n      let systemErrorMessage;\n\n      if (error.message.includes(\"Password\")) {\n        systemErrorMessage = \"A senha precisa conter pelo menos 6 caracteres.\";\n      } else if (error.message.includes(\"email-already\")) {\n        systemErrorMessage = \"E-mail já cadastrado.\";\n      } else {\n        systemErrorMessage = \"Ocorreu um erro, por favor tenta mais tarde.\";\n      }\n\n      setError(systemErrorMessage);\n    }\n\n    setLoading(false);\n  };\n\n  const logout = () => {\n    checkIfIsCancelled();\n    signOut(auth);\n  };\n\n  const login = async data => {\n    checkIfIsCancelled();\n    setLoading(true);\n    setError(false);\n\n    try {\n      await signInWithEmailAndPassword(auth, data.email, data.password);\n    } catch (error) {\n      console.log(error.message);\n      console.log(typeof error.message);\n      console.log(error.message.includes(\"user-not\"));\n      let systemErrorMessage;\n\n      if (error.message.includes(\"user-not-found\")) {\n        systemErrorMessage = \"Usuário não encontrado.\";\n      } else if (error.message.includes(\"wrong-password\")) {\n        systemErrorMessage = \"Senha incorreta.\";\n      } else {\n        systemErrorMessage = \"Ocorreu um erro, por favor tenta mais tarde.\";\n      }\n\n      console.log(systemErrorMessage);\n      setError(systemErrorMessage);\n    }\n\n    console.log(error);\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    return () => setCancelled(true);\n  }, []);\n  return {\n    auth,\n    createUser,\n    error,\n    logout,\n    login,\n    loading\n  };\n};\n\n_s(useAuthentication, \"xO6KHeiqqCsOzooKHe/mUZTZLjs=\");","map":{"version":3,"sources":["C:/Users/Eduardo/Documents/JS/react/MINIBLOG/miniblog/src/hooks/useAuthentication.js"],"names":["getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassword","updateProfile","signOut","useState","useEffect","useAuthentication","error","setError","loading","setLoading","cancelled","setCancelled","auth","checkIfIsCancelled","createUser","data","user","email","password","displayName","console","log","message","systemErrorMessage","includes","logout","login"],"mappings":"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","sourcesContent":["import {\n  getAuth,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  updateProfile,\n  signOut,\n} from \"firebase/auth\";\n\nimport { useState, useEffect } from \"react\";\n\nexport const useAuthentication = () => {\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(null);\n\n  // deal with memory leak\n  const [cancelled, setCancelled] = useState(false);\n\n  const auth = getAuth();\n\n  function checkIfIsCancelled() {\n    if (cancelled) {\n      return;\n    }\n  }\n\n  const createUser = async (data) => {\n    checkIfIsCancelled();\n\n    setLoading(true);\n\n    try {\n      const { user } = await createUserWithEmailAndPassword(\n        auth,\n        data.email,\n        data.password\n      );\n\n      await updateProfile(user, {\n        displayName: data.displayName,\n      });\n\n      return user;\n    } catch (error) {\n      console.log(error.message);\n      console.log(typeof error.message);\n\n      let systemErrorMessage;\n\n      if (error.message.includes(\"Password\")) {\n        systemErrorMessage = \"A senha precisa conter pelo menos 6 caracteres.\";\n      } else if (error.message.includes(\"email-already\")) {\n        systemErrorMessage = \"E-mail já cadastrado.\";\n      } else {\n        systemErrorMessage = \"Ocorreu um erro, por favor tenta mais tarde.\";\n      }\n\n      setError(systemErrorMessage);\n    }\n\n    setLoading(false);\n  };\n\n  const logout = () => {\n    checkIfIsCancelled();\n\n    signOut(auth);\n  };\n\n  const login = async (data) => {\n    checkIfIsCancelled();\n\n    setLoading(true);\n    setError(false);\n\n    try {\n      await signInWithEmailAndPassword(auth, data.email, data.password);\n    } catch (error) {\n      console.log(error.message);\n      console.log(typeof error.message);\n      console.log(error.message.includes(\"user-not\"));\n\n      let systemErrorMessage;\n\n      if (error.message.includes(\"user-not-found\")) {\n        systemErrorMessage = \"Usuário não encontrado.\";\n      } else if (error.message.includes(\"wrong-password\")) {\n        systemErrorMessage = \"Senha incorreta.\";\n      } else {\n        systemErrorMessage = \"Ocorreu um erro, por favor tenta mais tarde.\";\n      }\n\n      console.log(systemErrorMessage);\n\n      setError(systemErrorMessage);\n    }\n\n    console.log(error);\n\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    return () => setCancelled(true);\n  }, []);\n\n  return {\n    auth,\n    createUser,\n    error,\n    logout,\n    login,\n    loading,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}